import{d as g,u as B,r as u,o as a,c as m,b as v,w as d,p as C,v as I,a as N,m as n,g as z,q as w,l as f,_ as F,F as h,k as U}from"./index-OWjV_rHx.js";const $={class:"image-upload"},E=["src"],L={key:1,class:"placeholder"},M="/api/files/upload",S=g({__name:"ImageUpload",props:{modelValue:{}},emits:["update:modelValue"],setup(r,{emit:V}){const c=r,p=V,t=B(),i=f(()=>({Authorization:`Bearer ${t.token}`})),b=f(()=>c.modelValue?c.modelValue.startsWith("http")?c.modelValue.replace("/files/","/api/files/preview/"):`/api/files/preview/${c.modelValue}`:""),_=o=>{const s=o.type.startsWith("image/"),e=o.size/1024/1024<10;return s?e?!0:(alert("图片大小不能超过 10MB"),!1):(alert("只能上传图片文件"),!1)},y=o=>{o.code==="200"&&o.data?p("update:modelValue",o.data.url):alert("上传失败")},k=()=>{p("update:modelValue","")};return(o,s)=>{const e=u("el-icon"),l=u("el-upload"),x=u("el-button");return a(),m("div",$,[v(l,{class:"uploader",action:M,headers:i.value,"show-file-list":!1,"on-success":y,"before-upload":_,accept:"image/*"},{default:d(()=>[r.modelValue?(a(),m("img",{key:0,src:b.value,class:"preview"},null,8,E)):(a(),m("div",L,[v(e,{class:"icon"},{default:d(()=>[v(C(I))]),_:1}),s[0]||(s[0]=N("span",{class:"text"},"点击上传",-1))]))]),_:1},8,["headers"]),r.modelValue?(a(),n(x,{key:0,size:"small",type:"danger",onClick:k,class:"clear-btn"},{default:d(()=>[...s[1]||(s[1]=[z(" 清除 ",-1)])]),_:1})):w("",!0)])}}}),W=F(S,[["__scopeId","data-v-54e97a21"]]),A=g({__name:"EntityForm",props:{modelValue:{},fields:{}},emits:["update:modelValue"],setup(r,{emit:V}){const c=r,p=V,t=f({get:()=>c.modelValue,set:i=>p("update:modelValue",i)});return(i,b)=>{const _=u("el-input"),y=u("el-option"),k=u("el-select"),o=u("el-form-item"),s=u("el-form");return a(),n(s,{model:t.value,"label-width":"140px"},{default:d(()=>[(a(!0),m(h,null,U(r.fields,e=>(a(),n(o,{key:e.key,label:e.label},{default:d(()=>[!e.type||e.type==="text"?(a(),n(_,{key:0,modelValue:t.value[e.key],"onUpdate:modelValue":l=>t.value[e.key]=l},null,8,["modelValue","onUpdate:modelValue"])):e.type==="textarea"?(a(),n(_,{key:1,type:"textarea",rows:3,modelValue:t.value[e.key],"onUpdate:modelValue":l=>t.value[e.key]=l},null,8,["modelValue","onUpdate:modelValue"])):e.type==="image"?(a(),n(W,{key:2,modelValue:t.value[e.key],"onUpdate:modelValue":l=>t.value[e.key]=l},null,8,["modelValue","onUpdate:modelValue"])):e.type==="select"?(a(),n(k,{key:3,modelValue:t.value[e.key],"onUpdate:modelValue":l=>t.value[e.key]=l,placeholder:"请选择"+e.label,style:{width:"100%"},clearable:"",filterable:"","allow-create":""},{default:d(()=>[(a(!0),m(h,null,U(e.options,l=>(a(),n(y,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):w("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["model"])}}});export{A as _};
