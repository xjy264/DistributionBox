import{h as g}from"./http-g9MZ8hgC.js";import{_ as A}from"./EntityForm.vue_vue_type_script_setup_true_lang-CNk0mslD.js";import{d as I,c as O,a as V,b as l,w as s,h as C,j as c,r as f,o as L,g as u,s as P,p as T,_ as q}from"./index-OWjV_rHx.js";const F={class:"toolbar"},G={class:"pager"},_="/user",H=I({__name:"User",setup(J){const t=C({username:"",email:"",address:""}),k=c([]),v=c(1),b=c(10),y=c(0),i=c(!1);let n=C({});const w=[{key:"username",label:"用户名"},{key:"password",label:"密码"},{key:"nickname",label:"昵称"},{key:"email",label:"邮箱"},{key:"phone",label:"电话"},{key:"address",label:"地址"},{key:"avatarUrl",label:"头像URL"},{key:"role",label:"角色"}],r=async()=>{var p;const e=((p=(await g.get(`${_}/page`,{params:{pageNum:v.value,pageSize:b.value,username:t.username,email:t.email,address:t.address}})).data)==null?void 0:p.data)||{};k.value=e.records||e.content||[],y.value=e.total||e.totalElements||0},U=()=>{t.username="",t.email="",t.address="",r()},z=()=>{Object.keys(n).forEach(o=>delete n[o]),i.value=!0},x=o=>{Object.assign(n,o),i.value=!0},$=async()=>{await g.post(_,n),i.value=!1,r()},E=async o=>{await g.delete(`${_}/${o}`),r()},N=o=>{b.value=o,r()},S=o=>{v.value=o,r()};return r(),(o,e)=>{const p=f("el-input"),d=f("el-button"),m=f("el-table-column"),j=f("el-table"),B=f("el-pagination"),D=f("el-dialog");return L(),O("div",null,[V("div",F,[l(p,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.username=a),placeholder:"用户名",class:"field"},null,8,["modelValue"]),l(p,{modelValue:t.email,"onUpdate:modelValue":e[1]||(e[1]=a=>t.email=a),placeholder:"邮箱",class:"field"},null,8,["modelValue"]),l(p,{modelValue:t.address,"onUpdate:modelValue":e[2]||(e[2]=a=>t.address=a),placeholder:"地址",class:"field"},null,8,["modelValue"]),l(d,{type:"primary",onClick:r},{default:s(()=>[...e[6]||(e[6]=[u("搜索",-1)])]),_:1}),l(d,{onClick:U},{default:s(()=>[...e[7]||(e[7]=[u("重置",-1)])]),_:1}),l(d,{type:"success",onClick:z},{default:s(()=>[...e[8]||(e[8]=[u("新增",-1)])]),_:1})]),l(j,{data:k.value,border:""},{default:s(()=>[l(m,{prop:"username",label:"用户名"}),l(m,{prop:"nickname",label:"昵称"}),l(m,{prop:"email",label:"邮箱"}),l(m,{prop:"phone",label:"电话"}),l(m,{prop:"role",label:"角色"}),l(m,{label:"操作",width:"180"},{default:s(a=>[l(d,{size:"small",onClick:R=>x(a.row)},{default:s(()=>[...e[9]||(e[9]=[u("编辑",-1)])]),_:1},8,["onClick"]),l(d,{size:"small",type:"danger",onClick:R=>E(a.row.id)},{default:s(()=>[...e[10]||(e[10]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),V("div",G,[l(B,{layout:"total, sizes, prev, pager, next, jumper",total:y.value,"page-size":b.value,"current-page":v.value,"page-sizes":[5,10,20],onSizeChange:N,onCurrentChange:S},null,8,["total","page-size","current-page"])]),l(D,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value=a),title:"用户",width:"650px"},{footer:s(()=>[l(d,{onClick:e[4]||(e[4]=a=>i.value=!1)},{default:s(()=>[...e[11]||(e[11]=[u("取消",-1)])]),_:1}),l(d,{type:"primary",onClick:$},{default:s(()=>[...e[12]||(e[12]=[u("保存",-1)])]),_:1})]),default:s(()=>[l(A,{modelValue:T(n),"onUpdate:modelValue":e[3]||(e[3]=a=>P(n)?n.value=a:n=a),fields:w},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),W=q(H,[["__scopeId","data-v-597ef756"]]);export{W as default};
