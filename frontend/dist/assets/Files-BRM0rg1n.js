import{h as f}from"./http-g9MZ8hgC.js";import{d as S,c as $,a as g,b as e,w as l,j as p,r as n,o as j,g as d,_ as E}from"./index-OWjV_rHx.js";const F={class:"toolbar"},U={class:"pager"},h=S({__name:"Files",setup(D){const m=p([]),r=p(1),c=p(10),v=p(0),_=p(""),o=async()=>{const a=await f.get("/files/page",{params:{pageNum:r.value,pageSize:c.value,name:_.value}});m.value=a.data.data.content,v.value=a.data.data.totalElements},b=()=>{o()},w=a=>{window.open(`/api/files/${a}`)},C=async a=>{await f.delete(`/files/${a}`),o()},z=a=>{c.value=a,o()},k=a=>{r.value=a,o()};return o(),(a,t)=>{const u=n("el-button"),y=n("el-upload"),x=n("el-input"),s=n("el-table-column"),V=n("el-table"),N=n("el-pagination");return j(),$("div",null,[g("div",F,[e(y,{action:"/api/files/upload","show-file-list":!1,"on-success":b},{default:l(()=>[e(u,{type:"primary"},{default:l(()=>[...t[1]||(t[1]=[d("上传文件",-1)])]),_:1})]),_:1}),e(x,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=i=>_.value=i),placeholder:"文件名",class:"field"},null,8,["modelValue"]),e(u,{onClick:o},{default:l(()=>[...t[2]||(t[2]=[d("查询",-1)])]),_:1})]),e(V,{data:m.value,border:""},{default:l(()=>[e(s,{prop:"name",label:"名称"}),e(s,{prop:"type",label:"类型"}),e(s,{prop:"size",label:"大小(KB)"}),e(s,{prop:"url",label:"链接"}),e(s,{label:"操作",width:"200"},{default:l(i=>[e(u,{size:"small",onClick:B=>w(i.row.uuid)},{default:l(()=>[...t[3]||(t[3]=[d("下载",-1)])]),_:1},8,["onClick"]),e(u,{size:"small",type:"danger",onClick:B=>C(i.row.id)},{default:l(()=>[...t[4]||(t[4]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),g("div",U,[e(N,{layout:"total, sizes, prev, pager, next, jumper",total:v.value,"page-size":c.value,"current-page":r.value,"page-sizes":[5,10,20],onSizeChange:z,onCurrentChange:k},null,8,["total","page-size","current-page"])])])}}}),T=E(h,[["__scopeId","data-v-0cd7549b"]]);export{T as default};
