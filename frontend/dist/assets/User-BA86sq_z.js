import{h as g}from"./http-Cn7TCoTQ.js";import{_ as O}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as R,c as I,a as y,b as l,w as s,h as V,i as f,r as m,o as L,g as u,j as T,k as q,_ as A}from"./index-CkmIPjxY.js";const F={class:"toolbar"},G={class:"pager"},H=R({__name:"User",setup(J){const o=V({username:"",email:"",address:""}),k=f([]),v=f(1),b=f(10),_=f(0),i=f(!1);let n=V({});const C=[{key:"username",label:"用户名"},{key:"password",label:"密码"},{key:"nickname",label:"昵称"},{key:"email",label:"邮箱"},{key:"phone",label:"电话"},{key:"address",label:"地址"},{key:"avatarUrl",label:"头像URL"},{key:"role",label:"角色"}],r=async()=>{const t=await g.get("/users/page",{params:{pageNum:v.value,pageSize:b.value,username:o.username,email:o.email,address:o.address}});k.value=t.data.data.content,_.value=t.data.data.totalElements},w=()=>{o.username="",o.email="",o.address="",r()},z=()=>{Object.keys(n).forEach(t=>delete n[t]),i.value=!0},U=t=>{Object.assign(n,t),i.value=!0},x=async()=>{await g.post("/users",n),i.value=!1,r()},N=async t=>{await g.delete(`/users/${t}`),r()},j=t=>{b.value=t,r()},$=t=>{v.value=t,r()};return r(),(t,e)=>{const c=m("el-input"),d=m("el-button"),p=m("el-table-column"),B=m("el-table"),E=m("el-pagination"),S=m("el-dialog");return L(),I("div",null,[y("div",F,[l(c,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),placeholder:"用户名",class:"field"},null,8,["modelValue"]),l(c,{modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=a=>o.email=a),placeholder:"邮箱",class:"field"},null,8,["modelValue"]),l(c,{modelValue:o.address,"onUpdate:modelValue":e[2]||(e[2]=a=>o.address=a),placeholder:"地址",class:"field"},null,8,["modelValue"]),l(d,{type:"primary",onClick:r},{default:s(()=>[...e[6]||(e[6]=[u("搜索",-1)])]),_:1}),l(d,{onClick:w},{default:s(()=>[...e[7]||(e[7]=[u("重置",-1)])]),_:1}),l(d,{type:"success",onClick:z},{default:s(()=>[...e[8]||(e[8]=[u("新增",-1)])]),_:1})]),l(B,{data:k.value,border:""},{default:s(()=>[l(p,{prop:"username",label:"用户名"}),l(p,{prop:"nickname",label:"昵称"}),l(p,{prop:"email",label:"邮箱"}),l(p,{prop:"phone",label:"电话"}),l(p,{prop:"role",label:"角色"}),l(p,{label:"操作",width:"180"},{default:s(a=>[l(d,{size:"small",onClick:D=>U(a.row)},{default:s(()=>[...e[9]||(e[9]=[u("编辑",-1)])]),_:1},8,["onClick"]),l(d,{size:"small",type:"danger",onClick:D=>N(a.row.id)},{default:s(()=>[...e[10]||(e[10]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),y("div",G,[l(E,{layout:"total, sizes, prev, pager, next, jumper",total:_.value,"page-size":b.value,"current-page":v.value,"page-sizes":[5,10,20],onSizeChange:j,onCurrentChange:$},null,8,["total","page-size","current-page"])]),l(S,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value=a),title:"用户",width:"650px"},{footer:s(()=>[l(d,{onClick:e[4]||(e[4]=a=>i.value=!1)},{default:s(()=>[...e[11]||(e[11]=[u("取消",-1)])]),_:1}),l(d,{type:"primary",onClick:x},{default:s(()=>[...e[12]||(e[12]=[u("保存",-1)])]),_:1})]),default:s(()=>[l(O,{modelValue:q(n),"onUpdate:modelValue":e[3]||(e[3]=a=>T(n)?n.value=a:n=a),fields:C},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Q=A(H,[["__scopeId","data-v-afa88148"]]);export{Q as default};
