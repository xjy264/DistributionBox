import{h as b}from"./http-Cn7TCoTQ.js";import{_ as N}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as $,c as B,a as j,b as l,w as o,i as c,r as i,o as z,g as u,j as R,k as U,h as D,_ as E}from"./index-CkmIPjxY.js";const O={class:"toolbar"},I=$({__name:"Record",setup(P){const p=c(""),f=c([]),r=c(!1);let n=D({});const k=[{key:"pid",label:"台帐号"},{key:"terminalName",label:"终端名称"},{key:"temperature",label:"温度"},{key:"runningCurrent",label:"运行电流"},{key:"startingCurrent",label:"启动电流"},{key:"leakage",label:"漏电"},{key:"voltage",label:"电压"},{key:"insulation",label:"绝缘"},{key:"ground",label:"接地"},{key:"number",label:"编号"},{key:"remark",label:"备注",type:"textarea"}],m=async()=>{if(p.value){const a=await b.get(`/record/getByPid/${p.value}`);f.value=a.data.data}else{const a=await b.get("/record/page",{params:{pageNum:1,pageSize:50}});f.value=a.data.data.content}},v=()=>{Object.keys(n).forEach(a=>delete n[a]),r.value=!0},y=a=>{Object.assign(n,a),r.value=!0},_=async()=>{await b.post("/record",n),r.value=!1,m()},g=async a=>{await b.delete(`/record/${a}`),m()};return m(),(a,e)=>{const C=i("el-input"),s=i("el-button"),d=i("el-table-column"),V=i("el-table"),w=i("el-dialog");return z(),B("div",null,[j("div",O,[l(C,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),placeholder:"台帐号",class:"field"},null,8,["modelValue"]),l(s,{type:"primary",onClick:m},{default:o(()=>[...e[4]||(e[4]=[u("查询",-1)])]),_:1}),l(s,{type:"success",onClick:v},{default:o(()=>[...e[5]||(e[5]=[u("新增",-1)])]),_:1})]),l(V,{data:f.value,border:""},{default:o(()=>[l(d,{prop:"pid",label:"台帐号"}),l(d,{prop:"terminalName",label:"终端"}),l(d,{prop:"temperature",label:"温度"}),l(d,{prop:"voltage",label:"电压"}),l(d,{prop:"remark",label:"备注"}),l(d,{label:"操作",width:"180"},{default:o(t=>[l(s,{size:"small",onClick:x=>y(t.row)},{default:o(()=>[...e[6]||(e[6]=[u("编辑",-1)])]),_:1},8,["onClick"]),l(s,{size:"small",type:"danger",onClick:x=>g(t.row.id)},{default:o(()=>[...e[7]||(e[7]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(w,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),title:"记录",width:"600px"},{footer:o(()=>[l(s,{onClick:e[2]||(e[2]=t=>r.value=!1)},{default:o(()=>[...e[8]||(e[8]=[u("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:_},{default:o(()=>[...e[9]||(e[9]=[u("保存",-1)])]),_:1})]),default:o(()=>[l(N,{modelValue:U(n),"onUpdate:modelValue":e[1]||(e[1]=t=>R(n)?n.value=t:n=t),fields:k},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),A=E(I,[["__scopeId","data-v-f1977e76"]]);export{A as default};
