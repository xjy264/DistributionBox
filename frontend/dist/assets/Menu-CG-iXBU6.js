import{h as f}from"./http-Cn7TCoTQ.js";import{_ as M}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as $,c as j,a as B,b as l,w as t,i as b,r as p,o as D,g as i,j as N,k as U,h as z,_ as E}from"./index-CkmIPjxY.js";const I={class:"toolbar"},O=$({__name:"Menu",setup(P){const m=b(""),_=b([]),d=b(!1);let o=z({});const c=[{key:"name",label:"名称"},{key:"path",label:"路径"},{key:"icon",label:"图标"},{key:"description",label:"描述"},{key:"pid",label:"父级ID"},{key:"pagePath",label:"页面路径"},{key:"hideMenu",label:"隐藏"}],r=async()=>{const n=await f.get("/menus",{params:{name:m.value}});_.value=n.data.data},v=()=>{Object.keys(o).forEach(n=>delete o[n]),d.value=!0},k=n=>{Object.assign(o,n),d.value=!0},y=async()=>{await f.post("/menus",o),d.value=!1,r()},V=async n=>{await f.delete(`/menus/${n}`),r()};return r(),(n,e)=>{const C=p("el-input"),u=p("el-button"),s=p("el-table-column"),g=p("el-table"),w=p("el-dialog");return D(),j("div",null,[B("div",I,[l(C,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),placeholder:"菜单名称",class:"field"},null,8,["modelValue"]),l(u,{onClick:r},{default:t(()=>[...e[4]||(e[4]=[i("查询",-1)])]),_:1}),l(u,{type:"success",onClick:v},{default:t(()=>[...e[5]||(e[5]=[i("新增",-1)])]),_:1})]),l(g,{data:_.value,border:""},{default:t(()=>[l(s,{prop:"name",label:"名称"}),l(s,{prop:"path",label:"路径"}),l(s,{prop:"icon",label:"图标"}),l(s,{prop:"pid",label:"父级"}),l(s,{prop:"pagePath",label:"页面"}),l(s,{prop:"hideMenu",label:"隐藏"}),l(s,{label:"操作",width:"180"},{default:t(a=>[l(u,{size:"small",onClick:x=>k(a.row)},{default:t(()=>[...e[6]||(e[6]=[i("编辑",-1)])]),_:1},8,["onClick"]),l(u,{size:"small",type:"danger",onClick:x=>V(a.row.id)},{default:t(()=>[...e[7]||(e[7]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(w,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value=a),title:"菜单",width:"650px"},{footer:t(()=>[l(u,{onClick:e[2]||(e[2]=a=>d.value=!1)},{default:t(()=>[...e[8]||(e[8]=[i("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:y},{default:t(()=>[...e[9]||(e[9]=[i("保存",-1)])]),_:1})]),default:t(()=>[l(M,{modelValue:U(o),"onUpdate:modelValue":e[1]||(e[1]=a=>N(o)?o.value=a:o=a),fields:c},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),A=E(O,[["__scopeId","data-v-a23dc069"]]);export{A as default};
