import{h as m}from"./http-g9MZ8hgC.js";import{_ as C}from"./EntityForm.vue_vue_type_script_setup_true_lang-CNk0mslD.js";import{d as V,c as w,a as R,b as a,w as l,j as b,r as p,o as L,g as d,s as N,p as T,h as $,_ as j}from"./index-OWjV_rHx.js";const z={class:"toolbar"},B=V({__name:"Maintenance",setup(P){const f=b([]),s=b(!1);let t=$({});const c=[{key:"pid",label:"台帐号"},{key:"reportUser",label:"报修人"},{key:"reportTime",label:"报修时间"},{key:"fixUser",label:"抢修人"},{key:"fixTime",label:"抢修时间"},{key:"faultPhenomenon",label:"故障现象"},{key:"faultReason",label:"故障原因"},{key:"fixProcess",label:"维修过程",type:"textarea"},{key:"components",label:"更换元器件"},{key:"remark",label:"备注",type:"textarea"},{key:"firstUrl",label:"图片1URL"},{key:"secondUrl",label:"图片2URL"},{key:"thirdUrl",label:"图片3URL"},{key:"fourthUrl",label:"图片4URL"}],u=async()=>{const o=await m.get("/maintenance/page",{params:{pageNum:1,pageSize:50}});f.value=o.data.data.content},k=()=>{Object.keys(t).forEach(o=>delete t[o]),s.value=!0},y=o=>{Object.assign(t,o),s.value=!0},_=async()=>{await m.post("/maintenance/save",t),s.value=!1,u()},v=async o=>{await m.delete(`/maintenance/${o}`),u()};return u(),(o,e)=>{const r=p("el-button"),i=p("el-table-column"),U=p("el-table"),g=p("el-dialog");return L(),w("div",null,[R("div",z,[a(r,{type:"success",onClick:k},{default:l(()=>[...e[3]||(e[3]=[d("新增",-1)])]),_:1})]),a(U,{data:f.value,border:""},{default:l(()=>[a(i,{prop:"pid",label:"台帐号"}),a(i,{prop:"reportUser",label:"报修人"}),a(i,{prop:"reportTime",label:"报修时间"}),a(i,{prop:"faultPhenomenon",label:"故障现象"}),a(i,{label:"操作",width:"180"},{default:l(n=>[a(r,{size:"small",onClick:x=>y(n.row)},{default:l(()=>[...e[4]||(e[4]=[d("编辑",-1)])]),_:1},8,["onClick"]),a(r,{size:"small",type:"danger",onClick:x=>v(n.row.id)},{default:l(()=>[...e[5]||(e[5]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),a(g,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value=n),title:"维保记录",width:"700px"},{footer:l(()=>[a(r,{onClick:e[1]||(e[1]=n=>s.value=!1)},{default:l(()=>[...e[6]||(e[6]=[d("取消",-1)])]),_:1}),a(r,{type:"primary",onClick:_},{default:l(()=>[...e[7]||(e[7]=[d("保存",-1)])]),_:1})]),default:l(()=>[a(C,{modelValue:T(t),"onUpdate:modelValue":e[0]||(e[0]=n=>N(t)?t.value=n:t=n),fields:c},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),O=j(B,[["__scopeId","data-v-397af7b4"]]);export{O as default};
