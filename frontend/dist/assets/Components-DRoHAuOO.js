import{h as b}from"./http-g9MZ8hgC.js";import{_ as N}from"./EntityForm.vue_vue_type_script_setup_true_lang-CNk0mslD.js";import{d as S,c as U,a as $,b as t,w as a,h as y,j as _,r as c,o as D,g as r,s as j,p as B,_ as T}from"./index-OWjV_rHx.js";const z={class:"toolbar"},E=S({__name:"Components",setup(O){const m=y({boxId:""}),f=_([]),i=_(!1);let s=y({});const k=[{key:"componentsName",label:"元件"},{key:"componentsUnit",label:"单位"},{key:"componentsQuantity",label:"数量"},{key:"componentsType",label:"厂家/型号"},{key:"componentsState",label:"技术状态"},{key:"boxId",label:"配电箱ID"},{key:"controlScope",label:"回路控制范围"},{key:"inSpecifications",label:"进线规格"},{key:"outSpecifications",label:"出线规格"}],u=async()=>{var n,e;if(m.boxId){const o=await b.get(`/components/${m.boxId}`);f.value=Array.isArray((n=o.data)==null?void 0:n.data)?o.data.data:Array.isArray(o.data)?o.data:[]}else{const o=await b.get("/components/getAll");f.value=Array.isArray((e=o.data)==null?void 0:e.data)?o.data.data:Array.isArray(o.data)?o.data:[]}},v=()=>{m.boxId="",u()},x=()=>{Object.keys(s).forEach(n=>delete s[n]),i.value=!0},C=n=>{Object.assign(s,n),i.value=!0},V=async()=>{await b.post("/components/save",s),i.value=!1,u()},I=async n=>{await b.delete(`/components/${n}`),u()};return u(),(n,e)=>{const o=c("el-input"),d=c("el-button"),p=c("el-table-column"),g=c("el-table"),w=c("el-dialog");return D(),U("div",null,[$("div",z,[t(o,{modelValue:m.boxId,"onUpdate:modelValue":e[0]||(e[0]=l=>m.boxId=l),placeholder:"配电箱ID",class:"field"},null,8,["modelValue"]),t(d,{type:"primary",onClick:u},{default:a(()=>[...e[4]||(e[4]=[r("搜索",-1)])]),_:1}),t(d,{onClick:v},{default:a(()=>[...e[5]||(e[5]=[r("重置",-1)])]),_:1}),t(d,{type:"success",onClick:x},{default:a(()=>[...e[6]||(e[6]=[r("新增",-1)])]),_:1})]),t(g,{data:f.value,border:""},{default:a(()=>[t(p,{prop:"componentsName",label:"元件"}),t(p,{prop:"componentsUnit",label:"单位"}),t(p,{prop:"componentsQuantity",label:"数量"}),t(p,{prop:"componentsType",label:"厂家/型号"}),t(p,{prop:"componentsState",label:"状态"}),t(p,{prop:"boxId",label:"配电箱"}),t(p,{label:"操作",width:"180"},{default:a(l=>[t(d,{size:"small",onClick:A=>C(l.row)},{default:a(()=>[...e[7]||(e[7]=[r("编辑",-1)])]),_:1},8,["onClick"]),t(d,{size:"small",type:"danger",onClick:A=>I(l.row.id)},{default:a(()=>[...e[8]||(e[8]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),t(w,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),title:"元器件",width:"650px"},{footer:a(()=>[t(d,{onClick:e[2]||(e[2]=l=>i.value=!1)},{default:a(()=>[...e[9]||(e[9]=[r("取消",-1)])]),_:1}),t(d,{type:"primary",onClick:V},{default:a(()=>[...e[10]||(e[10]=[r("保存",-1)])]),_:1})]),default:a(()=>[t(N,{modelValue:B(s),"onUpdate:modelValue":e[1]||(e[1]=l=>j(s)?s.value=l:s=l),fields:k},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),F=T(E,[["__scopeId","data-v-c3989108"]]);export{F as default};
