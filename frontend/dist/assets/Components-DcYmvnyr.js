import{h as b}from"./http-Cn7TCoTQ.js";import{_ as S}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as U,c as $,a as D,b as o,w as t,h as f,i as y,r as u,o as j,g as p,j as B,k as T,_ as z}from"./index-CkmIPjxY.js";const E={class:"toolbar"},O=U({__name:"Components",setup(Q){const m=f({boxId:""}),c=y([]),i=y(!1);let n=f({});const k=[{key:"componentsName",label:"元件"},{key:"componentsUnit",label:"单位"},{key:"componentsQuantity",label:"数量"},{key:"componentsType",label:"厂家/型号"},{key:"componentsState",label:"技术状态"},{key:"boxId",label:"配电箱ID"},{key:"controlScope",label:"回路控制范围"},{key:"inSpecifications",label:"进线规格"},{key:"outSpecifications",label:"出线规格"}],r=async()=>{if(m.boxId){const l=await b.get(`/components/${m.boxId}`);c.value=l.data.data}else{const l=await b.get("/components/getAll");c.value=l.data.data}},_=()=>{m.boxId="",r()},v=()=>{Object.keys(n).forEach(l=>delete n[l]),i.value=!0},x=l=>{Object.assign(n,l),i.value=!0},C=async()=>{await b.post("/components/save",n),i.value=!1,r()},V=async l=>{await b.delete(`/components/${l}`),r()};return r(),(l,e)=>{const I=u("el-input"),s=u("el-button"),d=u("el-table-column"),g=u("el-table"),w=u("el-dialog");return j(),$("div",null,[D("div",E,[o(I,{modelValue:m.boxId,"onUpdate:modelValue":e[0]||(e[0]=a=>m.boxId=a),placeholder:"配电箱ID",class:"field"},null,8,["modelValue"]),o(s,{type:"primary",onClick:r},{default:t(()=>[...e[4]||(e[4]=[p("搜索",-1)])]),_:1}),o(s,{onClick:_},{default:t(()=>[...e[5]||(e[5]=[p("重置",-1)])]),_:1}),o(s,{type:"success",onClick:v},{default:t(()=>[...e[6]||(e[6]=[p("新增",-1)])]),_:1})]),o(g,{data:c.value,border:""},{default:t(()=>[o(d,{prop:"componentsName",label:"元件"}),o(d,{prop:"componentsUnit",label:"单位"}),o(d,{prop:"componentsQuantity",label:"数量"}),o(d,{prop:"componentsType",label:"厂家/型号"}),o(d,{prop:"componentsState",label:"状态"}),o(d,{prop:"boxId",label:"配电箱"}),o(d,{label:"操作",width:"180"},{default:t(a=>[o(s,{size:"small",onClick:N=>x(a.row)},{default:t(()=>[...e[7]||(e[7]=[p("编辑",-1)])]),_:1},8,["onClick"]),o(s,{size:"small",type:"danger",onClick:N=>V(a.row.id)},{default:t(()=>[...e[8]||(e[8]=[p("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),o(w,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value=a),title:"元器件",width:"650px"},{footer:t(()=>[o(s,{onClick:e[2]||(e[2]=a=>i.value=!1)},{default:t(()=>[...e[9]||(e[9]=[p("取消",-1)])]),_:1}),o(s,{type:"primary",onClick:C},{default:t(()=>[...e[10]||(e[10]=[p("保存",-1)])]),_:1})]),default:t(()=>[o(S,{modelValue:T(n),"onUpdate:modelValue":e[1]||(e[1]=a=>B(n)?n.value=a:n=a),fields:k},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),F=z(O,[["__scopeId","data-v-d00d7ed4"]]);export{F as default};
