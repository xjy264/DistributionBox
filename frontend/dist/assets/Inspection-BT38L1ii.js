import{h as k}from"./http-Cn7TCoTQ.js";import{_ as B}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as N,c as j,a as f,b as l,w as t,i as u,r as d,o as $,g as c,j as E,k as I,h as T,_ as A}from"./index-CkmIPjxY.js";const D={class:"toolbar"},O={class:"pager"},M=N({__name:"Inspection",setup(h){const y=u([]),b=u(1),m=u(10),g=u(0),s=u(!1);let n=T({});const v=[{key:"pid",label:"台帐号"},{key:"inspectionUser",label:"巡检人"},{key:"guardianUser",label:"监护人"},{key:"inspectionTime",label:"巡检时间"},{key:"switchModel",label:"开关型号"},{key:"currentRating",label:"额定电流"},{key:"traverseSection",label:"截面积"},{key:"supplyVoltage",label:"供电电压"},{key:"aStarting",label:"A起动"},{key:"aRunning",label:"A运行"},{key:"bStarting",label:"B起动"},{key:"bRunning",label:"B运行"},{key:"cStarting",label:"C起动"},{key:"cRunning",label:"C运行"},{key:"appearanceUrl",label:"外观图URL"},{key:"firstUrl",label:"图片1URL"},{key:"secondUrl",label:"图片2URL"},{key:"thirdUrl",label:"图片3URL"},{key:"fourthUrl",label:"图片4URL"},{key:"fifthUrl",label:"图片5URL"},{key:"earlierUrl",label:"前期URL"},{key:"laterUrl",label:"后期URL"},{key:"remark",label:"备注",type:"textarea"}],i=async()=>{const a=await k.get("/inspection/page",{params:{pageNum:b.value,pageSize:m.value}});y.value=a.data.data.content,g.value=a.data.data.totalElements},_=()=>{Object.keys(n).forEach(a=>delete n[a]),s.value=!0},U=a=>{Object.assign(n,a),s.value=!0},C=async()=>{await k.post("/inspection/save",n),s.value=!1,i()},R=async a=>{await k.delete(`/inspection/${a}`),i()},V=a=>{m.value=a,i()},w=a=>{b.value=a,i()};return i(),(a,e)=>{const r=d("el-button"),p=d("el-table-column"),z=d("el-table"),x=d("el-pagination"),L=d("el-dialog");return $(),j("div",null,[f("div",D,[l(r,{type:"success",onClick:_},{default:t(()=>[...e[3]||(e[3]=[c("新增",-1)])]),_:1})]),l(z,{data:y.value,border:""},{default:t(()=>[l(p,{prop:"pid",label:"台帐号"}),l(p,{prop:"inspectionUser",label:"巡检人"}),l(p,{prop:"inspectionTime",label:"巡检时间"}),l(p,{prop:"remark",label:"备注"}),l(p,{label:"操作",width:"180"},{default:t(o=>[l(r,{size:"small",onClick:S=>U(o.row)},{default:t(()=>[...e[4]||(e[4]=[c("编辑",-1)])]),_:1},8,["onClick"]),l(r,{size:"small",type:"danger",onClick:S=>R(o.row.id)},{default:t(()=>[...e[5]||(e[5]=[c("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),f("div",O,[l(x,{layout:"total, sizes, prev, pager, next, jumper",total:g.value,"page-size":m.value,"current-page":b.value,"page-sizes":[5,10,20],onSizeChange:V,onCurrentChange:w},null,8,["total","page-size","current-page"])]),l(L,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value=o),title:"巡检记录",width:"700px"},{footer:t(()=>[l(r,{onClick:e[1]||(e[1]=o=>s.value=!1)},{default:t(()=>[...e[6]||(e[6]=[c("取消",-1)])]),_:1}),l(r,{type:"primary",onClick:C},{default:t(()=>[...e[7]||(e[7]=[c("保存",-1)])]),_:1})]),default:t(()=>[l(B,{modelValue:I(n),"onUpdate:modelValue":e[0]||(e[0]=o=>E(n)?n.value=o:n=o),fields:v},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),H=A(M,[["__scopeId","data-v-e1f5cd21"]]);export{H as default};
