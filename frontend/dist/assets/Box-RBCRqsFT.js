import{h as k}from"./http-Cn7TCoTQ.js";import{_ as S}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as A,c as D,a as x,b as l,w as o,h as C,i as b,r as m,o as O,g as d,j as T,k as q,_ as F}from"./index-CkmIPjxY.js";const G={class:"toolbar"},H={class:"pager"},J=A({__name:"Box",setup(K){const s=C({address:"",area:""}),c=b([]),f=b(1),v=b(10),_=b(0),p=b(!1);let n=C({});const V=[{key:"boxId",label:"台帐号"},{key:"station",label:"车间"},{key:"area",label:"工区"},{key:"boxAddress",label:"安装地点"},{key:"size",label:"规格"},{key:"systemUrl",label:"系统图URL"},{key:"firstUrl",label:"图片1URL"},{key:"secondUrl",label:"图片2URL"},{key:"thirdUrl",label:"图片3URL"},{key:"fourthUrl",label:"图片4URL"}],i=async()=>{const a=await k.get("/boxes/page",{params:{pageNum:f.value,pageSize:v.value,address:s.address,area:s.area}});c.value=a.data.data.content,_.value=a.data.data.totalElements},U=()=>{s.address="",s.area="",i()},w=()=>{Object.keys(n).forEach(a=>delete n[a]),p.value=!0},z=a=>{Object.assign(n,a),p.value=!0},R=async()=>{await k.post("/boxes/save",n),p.value=!1,i()},$=async a=>{await k.delete(`/boxes/${a}`),i()},B=a=>{window.open(`/api/boxes/print/${a}`,"_blank")},L=a=>{v.value=a,i()},N=a=>{f.value=a,i()};return i(),(a,e)=>{const g=m("el-input"),r=m("el-button"),u=m("el-table-column"),j=m("el-table"),E=m("el-pagination"),I=m("el-dialog");return O(),D("div",null,[x("div",G,[l(g,{modelValue:s.address,"onUpdate:modelValue":e[0]||(e[0]=t=>s.address=t),placeholder:"安装地点",class:"field"},null,8,["modelValue"]),l(g,{modelValue:s.area,"onUpdate:modelValue":e[1]||(e[1]=t=>s.area=t),placeholder:"工区",class:"field"},null,8,["modelValue"]),l(r,{type:"primary",onClick:i},{default:o(()=>[...e[5]||(e[5]=[d("搜索",-1)])]),_:1}),l(r,{onClick:U},{default:o(()=>[...e[6]||(e[6]=[d("重置",-1)])]),_:1}),l(r,{type:"success",onClick:w},{default:o(()=>[...e[7]||(e[7]=[d("新增",-1)])]),_:1})]),l(j,{data:c.value,border:""},{default:o(()=>[l(u,{prop:"boxId",label:"台帐号"}),l(u,{prop:"station",label:"车间"}),l(u,{prop:"area",label:"工区"}),l(u,{prop:"boxAddress",label:"安装地点"}),l(u,{prop:"size",label:"规格"}),l(u,{label:"操作",width:"240"},{default:o(t=>[l(r,{size:"small",onClick:y=>z(t.row)},{default:o(()=>[...e[8]||(e[8]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(r,{size:"small",type:"danger",onClick:y=>$(t.row.id)},{default:o(()=>[...e[9]||(e[9]=[d("删除",-1)])]),_:1},8,["onClick"]),l(r,{size:"small",type:"primary",onClick:y=>B(t.row.id)},{default:o(()=>[...e[10]||(e[10]=[d("打印",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),x("div",H,[l(E,{layout:"total, sizes, prev, pager, next, jumper",total:_.value,"page-size":v.value,"current-page":f.value,"page-sizes":[5,10,20,50],onSizeChange:L,onCurrentChange:N},null,8,["total","page-size","current-page"])]),l(I,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),title:"配电箱",width:"650px"},{footer:o(()=>[l(r,{onClick:e[3]||(e[3]=t=>p.value=!1)},{default:o(()=>[...e[11]||(e[11]=[d("取消",-1)])]),_:1}),l(r,{type:"primary",onClick:R},{default:o(()=>[...e[12]||(e[12]=[d("保存",-1)])]),_:1})]),default:o(()=>[l(S,{modelValue:q(n),"onUpdate:modelValue":e[2]||(e[2]=t=>T(n)?n.value=t:n=t),fields:V},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),W=F(J,[["__scopeId","data-v-fd03db95"]]);export{W as default};
