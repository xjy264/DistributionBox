import{h as k}from"./http-g9MZ8hgC.js";import{_ as B}from"./EntityForm.vue_vue_type_script_setup_true_lang-CNk0mslD.js";import{d as N,c as j,a as f,b as l,w as t,j as u,r as d,o as $,g as c,s as D,p as E,h as I,_ as T}from"./index-OWjV_rHx.js";const A={class:"toolbar"},O={class:"pager"},M=N({__name:"Inspection",setup(h){const g=u([]),b=u(1),m=u(10),y=u(0),i=u(!1);let o=I({});const v=[{key:"pid",label:"台帐号"},{key:"inspectionUser",label:"巡检人"},{key:"guardianUser",label:"监护人"},{key:"inspectionTime",label:"巡检时间"},{key:"switchModel",label:"开关型号"},{key:"currentRating",label:"额定电流"},{key:"traverseSection",label:"截面积"},{key:"supplyVoltage",label:"供电电压"},{key:"aStarting",label:"A起动"},{key:"aRunning",label:"A运行"},{key:"bStarting",label:"B起动"},{key:"bRunning",label:"B运行"},{key:"cStarting",label:"C起动"},{key:"cRunning",label:"C运行"},{key:"appearanceUrl",label:"外观图URL"},{key:"firstUrl",label:"图片1URL"},{key:"secondUrl",label:"图片2URL"},{key:"thirdUrl",label:"图片3URL"},{key:"fourthUrl",label:"图片4URL"},{key:"fifthUrl",label:"图片5URL"},{key:"earlierUrl",label:"前期URL"},{key:"laterUrl",label:"后期URL"},{key:"remark",label:"备注",type:"textarea"}],r=async()=>{var n;const a=await k.get("/inspection/page",{params:{pageNum:b.value,pageSize:m.value}}),e=((n=a.data)==null?void 0:n.data)||a.data||{};g.value=e.records||e.content||[],y.value=e.total||e.totalElements||0},_=()=>{Object.keys(o).forEach(a=>delete o[a]),i.value=!0},U=a=>{Object.assign(o,a),i.value=!0},C=async()=>{await k.post("/inspection/save",o),i.value=!1,r()},R=async a=>{await k.delete(`/inspection/${a}`),r()},V=a=>{m.value=a,r()},w=a=>{b.value=a,r()};return r(),(a,e)=>{const n=d("el-button"),p=d("el-table-column"),z=d("el-table"),x=d("el-pagination"),L=d("el-dialog");return $(),j("div",null,[f("div",A,[l(n,{type:"success",onClick:_},{default:t(()=>[...e[3]||(e[3]=[c("新增",-1)])]),_:1})]),l(z,{data:g.value,border:""},{default:t(()=>[l(p,{prop:"pid",label:"台帐号"}),l(p,{prop:"inspectionUser",label:"巡检人"}),l(p,{prop:"inspectionTime",label:"巡检时间"}),l(p,{prop:"remark",label:"备注"}),l(p,{label:"操作",width:"180"},{default:t(s=>[l(n,{size:"small",onClick:S=>U(s.row)},{default:t(()=>[...e[4]||(e[4]=[c("编辑",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"danger",onClick:S=>R(s.row.id)},{default:t(()=>[...e[5]||(e[5]=[c("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),f("div",O,[l(x,{layout:"total, sizes, prev, pager, next, jumper",total:y.value,"page-size":m.value,"current-page":b.value,"page-sizes":[5,10,20],onSizeChange:V,onCurrentChange:w},null,8,["total","page-size","current-page"])]),l(L,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=s=>i.value=s),title:"巡检记录",width:"700px"},{footer:t(()=>[l(n,{onClick:e[1]||(e[1]=s=>i.value=!1)},{default:t(()=>[...e[6]||(e[6]=[c("取消",-1)])]),_:1}),l(n,{type:"primary",onClick:C},{default:t(()=>[...e[7]||(e[7]=[c("保存",-1)])]),_:1})]),default:t(()=>[l(B,{modelValue:E(o),"onUpdate:modelValue":e[0]||(e[0]=s=>D(o)?o.value=s:o=s),fields:v},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),H=T(M,[["__scopeId","data-v-c12e4294"]]);export{H as default};
