import{h as m}from"./http-Cn7TCoTQ.js";import{_ as B}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as N,c as j,a as z,b as t,w as l,i as k,r as c,o as D,g as d,j as U,k as E,h as O,_ as I}from"./index-CkmIPjxY.js";const P={class:"toolbar"},R=N({__name:"Check",setup(S){const u=k(""),f=k([]),i=k(!1);let n=O({});const v=[{key:"pid",label:"台帐号"},{key:"content",label:"检查项"},{key:"state",label:"状态"},{key:"remark",label:"备注",type:"textarea"}],r=async()=>{if(u.value){const a=await m.get(`/check/getByPid/${u.value}`);f.value=a.data.data}else{const a=await m.get("/check/page",{params:{pageNum:1,pageSize:50}});f.value=a.data.data.content}},b=async()=>{u.value&&(await m.post(`/check/addCheck/${u.value}`),r())},_=()=>{Object.keys(n).forEach(a=>delete n[a]),i.value=!0},y=a=>{Object.assign(n,a),i.value=!0},C=async()=>{await m.post("/check",n),i.value=!1,r()},g=async a=>{await m.delete(`/check/${a}`),r()};return r(),(a,e)=>{const V=c("el-input"),s=c("el-button"),p=c("el-table-column"),w=c("el-table"),x=c("el-dialog");return D(),j("div",null,[z("div",P,[t(V,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),placeholder:"台帐号",class:"field"},null,8,["modelValue"]),t(s,{type:"primary",onClick:r},{default:l(()=>[...e[4]||(e[4]=[d("查询",-1)])]),_:1}),t(s,{onClick:b},{default:l(()=>[...e[5]||(e[5]=[d("生成检查项",-1)])]),_:1}),t(s,{type:"success",onClick:_},{default:l(()=>[...e[6]||(e[6]=[d("新增",-1)])]),_:1})]),t(w,{data:f.value,border:""},{default:l(()=>[t(p,{prop:"pid",label:"台帐号"}),t(p,{prop:"content",label:"检查项"}),t(p,{prop:"state",label:"状态"}),t(p,{prop:"remark",label:"备注"}),t(p,{label:"操作",width:"180"},{default:l(o=>[t(s,{size:"small",onClick:$=>y(o.row)},{default:l(()=>[...e[7]||(e[7]=[d("编辑",-1)])]),_:1},8,["onClick"]),t(s,{size:"small",type:"danger",onClick:$=>g(o.row.id)},{default:l(()=>[...e[8]||(e[8]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),t(x,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value=o),title:"检查项",width:"500px"},{footer:l(()=>[t(s,{onClick:e[2]||(e[2]=o=>i.value=!1)},{default:l(()=>[...e[9]||(e[9]=[d("取消",-1)])]),_:1}),t(s,{type:"primary",onClick:C},{default:l(()=>[...e[10]||(e[10]=[d("保存",-1)])]),_:1})]),default:l(()=>[t(B,{modelValue:E(n),"onUpdate:modelValue":e[1]||(e[1]=o=>U(n)?n.value=o:n=o),fields:v},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),F=I(R,[["__scopeId","data-v-874ae3af"]]);export{F as default};
