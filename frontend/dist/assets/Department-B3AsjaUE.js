import{h as f}from"./http-Cn7TCoTQ.js";import{_ as D}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as N,c as $,a as j,b as t,w as a,i as _,r as u,o as z,g as r,j as B,k as U,h as E,_ as O}from"./index-CkmIPjxY.js";const I={class:"toolbar"},R=N({__name:"Department",setup(S){const i=_(""),c=_([]),s=_(!1);let o=E({});const v=[{key:"department",label:"部门"},{key:"address",label:"地址"}],p=async()=>{const n=await f.get("/departments/page",{params:{pageNum:1,pageSize:100,department:i.value}});c.value=n.data.data.content},b=()=>{Object.keys(o).forEach(n=>delete o[n]),s.value=!0},k=n=>{Object.assign(o,n),s.value=!0},V=async()=>{await f.post("/departments",o),s.value=!1,p()},g=async n=>{await f.delete(`/departments/${n}`),p()};return p(),(n,e)=>{const C=u("el-input"),d=u("el-button"),m=u("el-table-column"),y=u("el-table"),w=u("el-dialog");return z(),$("div",null,[j("div",I,[t(C,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),placeholder:"部门",class:"field"},null,8,["modelValue"]),t(d,{onClick:p},{default:a(()=>[...e[4]||(e[4]=[r("查询",-1)])]),_:1}),t(d,{type:"success",onClick:b},{default:a(()=>[...e[5]||(e[5]=[r("新增",-1)])]),_:1})]),t(y,{data:c.value,border:""},{default:a(()=>[t(m,{prop:"department",label:"部门"}),t(m,{prop:"address",label:"地址"}),t(m,{label:"操作",width:"160"},{default:a(l=>[t(d,{size:"small",onClick:x=>k(l.row)},{default:a(()=>[...e[6]||(e[6]=[r("编辑",-1)])]),_:1},8,["onClick"]),t(d,{size:"small",type:"danger",onClick:x=>g(l.row.id)},{default:a(()=>[...e[7]||(e[7]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),t(w,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),title:"部门",width:"500px"},{footer:a(()=>[t(d,{onClick:e[2]||(e[2]=l=>s.value=!1)},{default:a(()=>[...e[8]||(e[8]=[r("取消",-1)])]),_:1}),t(d,{type:"primary",onClick:V},{default:a(()=>[...e[9]||(e[9]=[r("保存",-1)])]),_:1})]),default:a(()=>[t(D,{modelValue:U(o),"onUpdate:modelValue":e[1]||(e[1]=l=>B(o)?o.value=l:o=l),fields:v},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),F=O(R,[["__scopeId","data-v-84c4c375"]]);export{F as default};
