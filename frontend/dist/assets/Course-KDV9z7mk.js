import{h as v}from"./http-g9MZ8hgC.js";import{_ as q}from"./EntityForm.vue_vue_type_script_setup_true_lang-CNk0mslD.js";import{d as A,c as F,a as w,b as l,w as o,j as n,r as c,o as G,g as u,s as H,p as J,h as K,_ as L}from"./index-OWjV_rHx.js";const M={class:"toolbar"},P={class:"toolbar"},Q={class:"pager"},W=A({__name:"Course",setup(X){const _=n(""),f=n(""),r=n(""),g=n(""),b=n([]),k=n(1),y=n(10),C=n(0),i=n(!1);let d=K({});const z=[{key:"name",label:"课程名称"},{key:"score",label:"学分"},{key:"times",label:"上课时间"},{key:"state",label:"是否开课"},{key:"teacherId",label:"教师ID"}],p=async()=>{const a=await v.get("/course/page",{params:{pageNum:k.value,pageSize:y.value,name:_.value}});b.value=a.data.data.content,C.value=a.data.data.totalElements},x=async()=>{if(!f.value)return;const a=await v.get(`/course/find/teacherCourses/${f.value}`);b.value=a.data.data,C.value=a.data.data.length},I=async()=>{if(!r.value)return;const a=await v.get(`/course/find/studentCourses/${r.value}`);b.value=a.data.data,C.value=a.data.data.length},D=async()=>{!r.value||!g.value||(await v.get("/course/selectCourse",{params:{studentId:r.value,courseId:g.value}}),I())},U=()=>{Object.keys(d).forEach(a=>delete d[a]),i.value=!0},$=a=>{Object.assign(d,a),i.value=!0},N=async()=>{await v.post("/course/save",d),i.value=!1,p()},j=async a=>{await v.delete(`/course/${a}`),p()},S=a=>{y.value=a,p()},B=a=>{k.value=a,p()};return p(),(a,e)=>{const V=c("el-input"),s=c("el-button"),m=c("el-table-column"),E=c("el-table"),O=c("el-pagination"),T=c("el-dialog");return G(),F("div",null,[w("div",M,[l(V,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"课程名称",class:"field"},null,8,["modelValue"]),l(s,{onClick:p},{default:o(()=>[...e[7]||(e[7]=[u("查询",-1)])]),_:1}),l(s,{type:"success",onClick:U},{default:o(()=>[...e[8]||(e[8]=[u("新增",-1)])]),_:1})]),w("div",P,[l(V,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),placeholder:"教师ID",class:"field"},null,8,["modelValue"]),l(s,{onClick:x},{default:o(()=>[...e[9]||(e[9]=[u("教师课程",-1)])]),_:1}),l(V,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),placeholder:"学生ID",class:"field"},null,8,["modelValue"]),l(s,{onClick:I},{default:o(()=>[...e[10]||(e[10]=[u("学生课程",-1)])]),_:1}),l(V,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),placeholder:"课程ID",class:"field"},null,8,["modelValue"]),l(s,{type:"primary",onClick:D},{default:o(()=>[...e[11]||(e[11]=[u("选课",-1)])]),_:1})]),l(E,{data:b.value,border:""},{default:o(()=>[l(m,{prop:"name",label:"课程"}),l(m,{prop:"score",label:"学分"}),l(m,{prop:"times",label:"时间"}),l(m,{prop:"teacher",label:"教师"}),l(m,{prop:"state",label:"状态"}),l(m,{label:"操作",width:"180"},{default:o(t=>[l(s,{size:"small",onClick:R=>$(t.row)},{default:o(()=>[...e[12]||(e[12]=[u("编辑",-1)])]),_:1},8,["onClick"]),l(s,{size:"small",type:"danger",onClick:R=>j(t.row.id)},{default:o(()=>[...e[13]||(e[13]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),w("div",Q,[l(O,{layout:"total, sizes, prev, pager, next, jumper",total:C.value,"page-size":y.value,"current-page":k.value,"page-sizes":[5,10,20],onSizeChange:S,onCurrentChange:B},null,8,["total","page-size","current-page"])]),l(T,{modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value=t),title:"课程",width:"600px"},{footer:o(()=>[l(s,{onClick:e[5]||(e[5]=t=>i.value=!1)},{default:o(()=>[...e[14]||(e[14]=[u("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:N},{default:o(()=>[...e[15]||(e[15]=[u("保存",-1)])]),_:1})]),default:o(()=>[l(q,{modelValue:J(d),"onUpdate:modelValue":e[4]||(e[4]=t=>H(d)?d.value=t:d=t),fields:z},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),ee=L(W,[["__scopeId","data-v-b1cf9efa"]]);export{ee as default};
