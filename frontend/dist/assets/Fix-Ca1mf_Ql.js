import{h as m}from"./http-Cn7TCoTQ.js";import{_ as V}from"./EntityForm.vue_vue_type_script_setup_true_lang-CkomLGgO.js";import{d as w,c as N,a as $,b as l,w as a,i as b,r as u,o as j,g as i,j as z,k as B,h as D,_ as I}from"./index-CkmIPjxY.js";const E={class:"toolbar"},F=w({__name:"Fix",setup(O){const f=b([]),n=b(!1);let t=D({});const c=[{key:"code",label:"抢修编号"},{key:"time",label:"时间"},{key:"address",label:"地点"},{key:"result",label:"结果"},{key:"user",label:"负责人"},{key:"remark",label:"备注",type:"textarea"},{key:"boxId",label:"配电箱ID"}],p=async()=>{const o=await m.get("/fix/page",{params:{pageNum:1,pageSize:50}});f.value=o.data.data.content},_=()=>{Object.keys(t).forEach(o=>delete t[o]),n.value=!0},k=o=>{Object.assign(t,o),n.value=!0},v=async()=>{await m.post("/fix/save",t),n.value=!1,p()},y=async o=>{await m.delete(`/fix/${o}`),p()};return p(),(o,e)=>{const d=u("el-button"),r=u("el-table-column"),x=u("el-table"),g=u("el-dialog");return j(),N("div",null,[$("div",E,[l(d,{type:"success",onClick:_},{default:a(()=>[...e[3]||(e[3]=[i("新增",-1)])]),_:1})]),l(x,{data:f.value,border:""},{default:a(()=>[l(r,{prop:"code",label:"抢修编号"}),l(r,{prop:"time",label:"时间"}),l(r,{prop:"address",label:"地点"}),l(r,{prop:"user",label:"负责人"}),l(r,{prop:"result",label:"结果"}),l(r,{label:"操作",width:"180"},{default:a(s=>[l(d,{size:"small",onClick:C=>k(s.row)},{default:a(()=>[...e[4]||(e[4]=[i("编辑",-1)])]),_:1},8,["onClick"]),l(d,{size:"small",type:"danger",onClick:C=>y(s.row.id)},{default:a(()=>[...e[5]||(e[5]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(g,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),title:"抢修记录",width:"650px"},{footer:a(()=>[l(d,{onClick:e[1]||(e[1]=s=>n.value=!1)},{default:a(()=>[...e[6]||(e[6]=[i("取消",-1)])]),_:1}),l(d,{type:"primary",onClick:v},{default:a(()=>[...e[7]||(e[7]=[i("保存",-1)])]),_:1})]),default:a(()=>[l(V,{modelValue:B(t),"onUpdate:modelValue":e[0]||(e[0]=s=>z(t)?t.value=s:t=s),fields:c},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),T=I(F,[["__scopeId","data-v-62ee25b7"]]);export{T as default};
