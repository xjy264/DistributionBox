# v1.12 完成记录

## 本次完成内容

### 1) 最新系统新增“查看详细信息”入口（已完成）
- 文件：`frontend/src/views/Box.vue`
- 变更：在配电箱列表操作列新增按钮“查看详细信息”。
- 行为：点击后跳转到详情页路由，并携带 `id + boxId`。

### 2) 新增配电箱详情页路由与页面（已完成）
- 文件：
  - `frontend/src/router/index.ts`
  - `frontend/src/views/BoxDetail.vue`（新建）
- 变更：新增路由 `box-detail/:id`。
- 页面能力：展示配电箱基础信息 + 元器件列表；支持返回列表。
- 数据读取：
  - 先按 `/box/{id}` 取配电箱详情
  - 再按 `boxId`（必要时回退）取 `/components/{boxId}`

### 3) old-box 数据库重建（已完成）
- 新增脚本：`scripts/init-old-box-db.sh`
- 新增数据集：`sql/old-box-seed.sql`
- 内容：
  - 建库并按顺序执行 `sql/migrations/V*.sql`
  - 初始化角色、菜单、角色菜单、管理员账号、示例配电箱、示例元器件
- 已实测：`DB_PASS='Xjy12345@@' ./scripts/init-old-box-db.sh` 可完成初始化（DB: `shujia`）。

### 4) old-box 项目启动（已完成）
- 后端：`old-box/target/shujia-0.0.1-SNAPSHOT.jar`
  - 启动参数中覆盖数据库密码为本机可用密码。
- 前端：`old-box/myvue` 已安装依赖并启动 dev server（`http://localhost:5174`）。
- 登录接口实测通过：`admin / admin123` 返回 code=200。

---

## old-box vs 最新系统：二级路由对齐检查

### 已对齐/可替代
- 配电箱 `/box`
- 元器件 `/components`
- 巡检 `/inspection`
- 维保 `/maintenance`
- 抢修 `/fix`
- 文件 `/files`
- 用户/角色/菜单/部门等管理页

### 仍存在差异（建议）
1. **old-box 的 `Home`（/home）** 在新系统中无同名入口（可评估是否恢复为“总览页”）。
2. old-box 的动态路由容器 `Manage` 机制在新系统改为静态主布局（这是架构差异，不一定是缺陷）。
3. old-box 中 `MaintenanceHome`、`Test` 等历史页面在新系统未保留（需确认是否业务必需）。

---

## 为什么这样改
1. **最小改动恢复核心体验**：先补“查看详细信息”入口 + 详情页，快速恢复 old-box 的关键路径。  
2. **避免侵入后端**：复用现有 `/box/*` 与 `/components/*` 接口，降低风险。  
3. **可复现数据恢复**：通过脚本化建库+种子数据，让 old-box 丢库后可一键恢复。

---

## 你现在可直接使用

1) 访问 old-box 前端：`http://localhost:5174`  
2) 登录：`admin / admin123`  
3) 在新系统 `Box` 列表里可见“查看详细信息”按钮并跳转详情页
